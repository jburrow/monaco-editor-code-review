{"version":3,"sources":["webpack://MonacoEditorCodeReview/webpack/bootstrap","webpack://MonacoEditorCodeReview/./node_modules/uuid/lib/bytesToUuid.js","webpack://MonacoEditorCodeReview/./node_modules/uuid/lib/rng-browser.js","webpack://MonacoEditorCodeReview/./node_modules/uuid/v4.js","webpack://MonacoEditorCodeReview/./src/docs.ts","webpack://MonacoEditorCodeReview/./src/index.ts"],"names":[],"mappings":"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","file":"docs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/docs.ts\");\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import { ReviewComment, createReviewManager } from \"./index\";\r\n\r\ninterface WindowDoc {\r\n    require: any;\r\n    monaco: any;\r\n    setView: any;\r\n    generateDifferentComments: any;\r\n    generateDifferentContents: any;\r\n    toggleTheme: any;\r\n    clearComments: any;\r\n}\r\n\r\nconst win = (window as any) as WindowDoc;\r\nlet reviewManager: any = null;\r\nlet currentMode: string = '';\r\nlet currentEditor: any = null;\r\nlet theme = 'vs-dark';\r\n\r\nfunction ensureMonacoIsAvailable() {\r\n    return new Promise(resolve => {\r\n        if (!win.require) {\r\n            console.warn(\r\n                \"Unable to find a local node_modules folder - so dynamically using cdn instead\"\r\n            );\r\n            var prefix = \"https://microsoft.github.io/monaco-editor\";\r\n            const scriptTag = document.createElement(\"script\");\r\n            scriptTag.src = prefix + \"/node_modules/monaco-editor/min/vs/loader.js\";\r\n            scriptTag.onload = () => {\r\n                console.debug(\"Monaco loader is initialized\");\r\n                resolve(prefix);\r\n            };\r\n            document.body.appendChild(scriptTag);\r\n        } else {\r\n            resolve(\"..\");\r\n        }\r\n    });\r\n}\r\n\r\nfunction getRandomInt(max) {\r\n    return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n\r\nfunction setView(mode) {\r\n    const idx = getRandomInt((exampleSourceCode.length) / 2) * 2;\r\n\r\n    currentMode = mode;\r\n    document.getElementById(\"containerEditor\").innerHTML = \"\";\r\n    if (mode.startsWith(\"standard\")) {\r\n        currentEditor = win.monaco.editor.create(\r\n            document.getElementById(\"containerEditor\"),\r\n            {\r\n                value: exampleSourceCode[idx],\r\n                language: \"typescript\",\r\n                glyphMargin: true,\r\n                contextmenu: true,\r\n                automaticLayout: true,\r\n                readOnly: mode === \"standard-readonly\",\r\n                theme: theme\r\n            }\r\n        );\r\n\r\n        initReviewManager(currentEditor);\r\n    } else {\r\n        var originalModel = win.monaco.editor.createModel(\r\n            exampleSourceCode[idx],\r\n            \"typescript\"\r\n        );\r\n        var modifiedModel = win.monaco.editor.createModel(\r\n            exampleSourceCode[idx + 1],\r\n            \"typescript\"\r\n        );\r\n\r\n        currentEditor = win.monaco.editor.createDiffEditor(\r\n            document.getElementById(\"containerEditor\"),\r\n            { renderSideBySide: mode !== \"inline\" }\r\n        );\r\n        currentEditor.setModel({\r\n            original: originalModel,\r\n            modified: modifiedModel\r\n        });\r\n\r\n        initReviewManager(currentEditor.modifiedEditor);\r\n    }\r\n}\r\n\r\nfunction generateDifferentContents() {\r\n    const idx = getRandomInt((exampleSourceCode.length) / 2) * 2;\r\n\r\n    if (currentMode.startsWith(\"standard\")) {\r\n        currentEditor.setValue(exampleSourceCode[idx]);\r\n    } else {\r\n        currentEditor.getModel().modified.setValue(exampleSourceCode[idx]);\r\n        currentEditor.getModel().modified.setValue(exampleSourceCode[idx + 1]);\r\n    }\r\n}\r\n\r\nconst exampleSourceCode = [];\r\n\r\nasync function fetchSourceCode(url: string) {\r\n    const response = await fetch(url);\r\n    const exampleText = await response.text();\r\n\r\n    const modifiedText = exampleText.replace(\r\n        new RegExp(\"string\", \"g\"),\r\n        \"string /* String!*/\"\r\n    );\r\n\r\n    exampleSourceCode.push(url + '\\n' + exampleText);\r\n    exampleSourceCode.push(url + '\\n' + modifiedText);\r\n}\r\n\r\nasync function init() {\r\n    var prefix = await ensureMonacoIsAvailable();\r\n    await fetchSourceCode(\"../src/index.ts\");\r\n    await fetchSourceCode(\"../src/docs.ts\");\r\n    await fetchSourceCode(\"../src/index.test.ts\");\r\n\r\n    const response = await fetch(\"../dist/timestamp.json\");\r\n    const tsobj = await response.json();\r\n    console.log(\"Compiled at:\", tsobj.date);\r\n\r\n    win.require.config({\r\n        paths: { vs: prefix + \"/node_modules/monaco-editor/min/vs\" }\r\n    });\r\n\r\n    win.require([\"vs/editor/editor.main\"], function () {\r\n        setView(\"standard\");\r\n    });\r\n}\r\n\r\nfunction initReviewManager(editor: any) {\r\n\r\n    reviewManager = createReviewManager(\r\n        editor,\r\n        \"mr reviewer\",\r\n        createRandomComments(),\r\n        updatedComments => renderComments(updatedComments),\r\n        { editButtonEnableRemove: true }\r\n    );\r\n\r\n    renderComments(reviewManager.comments);\r\n}\r\n\r\nfunction toggleTheme() {\r\n    theme = theme == 'vs' ? 'vs-dark' : 'vs';\r\n    win.monaco.editor.setTheme(theme)\r\n}\r\n\r\nfunction generateDifferentComments() {\r\n    reviewManager.load(createRandomComments());\r\n    renderComments(reviewManager.comments);\r\n}\r\n\r\nfunction createRandomComments(): ReviewComment[] {\r\n    const firstLine = Math.floor(Math.random() * 10);\r\n\r\n    return [\r\n        {\r\n            id: \"id-0\",\r\n            lineNumber: firstLine + 10,\r\n            author: \"another reviewer\",\r\n            dt: new Date(),\r\n            text: \"at start\",\r\n            selection: {\r\n                startColumn: 5,\r\n                startLineNumber: firstLine + 5,\r\n                endColumn: 10,\r\n                endLineNumber: firstLine + 10\r\n\r\n            }\r\n        },\r\n        {\r\n            id: \"id-1\",\r\n            lineNumber: firstLine + 50,\r\n            author: \"another reviewer\",\r\n            dt: new Date(),\r\n            text: \"at start\"\r\n        },\r\n        {\r\n            id: \"id-2\",\r\n            parentId: \"id-1\",\r\n            lineNumber: firstLine + 5,\r\n            author: \"another reviewer\",\r\n            dt: '2019-01-01 12:22:33',\r\n            text: \"this code isn't very good\",\r\n        },\r\n        {\r\n            id: \"id-3\",\r\n            parentId: \"id-2\",\r\n            lineNumber: firstLine + 5,\r\n            author: \"original author\",\r\n            dt: new Date(),\r\n            text: \"I think you will find it is good enough\"\r\n        },\r\n        {\r\n            parentId: \"id-3\",\r\n            lineNumber: firstLine + 5,\r\n            author: \"original author\",\r\n            dt: new Date(),\r\n            text: \"I think you will find it is good enough\",\r\n        },\r\n        {\r\n            parentId: \"id-3\",\r\n            lineNumber: firstLine + 5,\r\n            author: \"original author\",\r\n            dt: new Date(),\r\n            text: \"I think you will find it is good enough\",\r\n\r\n        }\r\n\r\n    ]\r\n}\r\n\r\nfunction renderComments(comments) {\r\n    comments = comments || [];\r\n    document.getElementById(\"summaryEditor\").innerHTML = reviewManager.comments\r\n        .map(\r\n            comment =>\r\n                `<div style=\"display:flex;height:16px;text-decoration:${comment.status && comment.status === 2 ? 'line-through' : 'normal'}\">\r\n                    <div style=\"width:100px;overflow:hidden;\">${comment.id}</div>\r\n                    <div style=\"width:50px;overflow:hidden;\">${comment.lineNumber}</div>\r\n                    <div style=\"width:100px;overflow:hidden;\">${comment.author}</div> \r\n                    <div style=\"width:100px;overflow:hidden;\">${comment.dt}</div> \r\n                    <div style=\"width:auto;overflow:hidden;\">${comment.text}</div>                    \r\n                    <div style=\"width:auto;overflow:hidden;\">${JSON.stringify(comment.selection||'')}</div>                    \r\n                </div>`\r\n        )\r\n        .join(\"\");\r\n\r\n}\r\n\r\nfunction clearComments() {\r\n    reviewManager.load([]);\r\n    renderComments([]);\r\n}\r\n\r\nwin.setView = setView;\r\nwin.generateDifferentComments = generateDifferentComments;\r\nwin.generateDifferentContents = generateDifferentContents;\r\nwin.toggleTheme = toggleTheme;\r\nwin.clearComments = clearComments;\r\ninit();\r\n\r\n","import * as uuid from \"uuid/v4\";\r\n\r\ninterface MonacoWindow {\r\n    monaco: any;\r\n}\r\n\r\nconst monacoWindow = (window as any) as MonacoWindow;\r\n\r\nexport interface ReviewComment {\r\n    id?: string;\r\n    parentId?: string;\r\n    author: string;\r\n    dt: Date | string;\r\n    lineNumber: number;\r\n    text: string;\r\n    selection?: CodeSelection;\r\n    status?: ReviewCommentStatus;\r\n}\r\n\r\nexport enum ReviewCommentStatus {\r\n    active = 1,\r\n    deleted = 2\r\n}\r\n\r\ninterface CodeSelection {\r\n    startColumn: number,\r\n    endColumn: number,\r\n    startLineNumber: number,\r\n    endLineNumber: number\r\n}\r\n\r\nclass ReviewCommentState {\r\n    viewZoneId: number;\r\n    renderStatus: ReviewCommentRenderState;\r\n    numberOfLines: number;\r\n\r\n    constructor(numberOfLines: number) {\r\n        this.renderStatus = ReviewCommentRenderState.normal;\r\n        this.viewZoneId = null;\r\n        this.numberOfLines = numberOfLines;\r\n    }\r\n}\r\n\r\nexport function createReviewManager(editor: any, currentUser: string, comments?: ReviewComment[], onChange?: OnCommentsChanged, config?: ReviewManagerConfig): ReviewManager {\r\n    //For Debug: (window as any).editor = editor;\r\n    const rm = new ReviewManager(editor, currentUser, onChange, config);\r\n    rm.load(comments || []);\r\n    return rm;\r\n}\r\n\r\n\r\ninterface ReviewCommentIterItem {\r\n    depth: number;\r\n    comment: ReviewComment,\r\n    viewState: ReviewCommentState\r\n}\r\n\r\ninterface OnCommentsChanged {\r\n    (comments: ReviewComment[]): void\r\n}\r\n\r\nexport interface ReviewManagerConfig {\r\n    editButtonEnableRemove?: boolean;\r\n    lineHeight?: number;\r\n    commentIndent?: number;\r\n    commentIndentOffset?: number;\r\n    editButtonAddText?: string;\r\n    editButtonRemoveText?: string;\r\n    editButtonOffset?: string;\r\n    reviewCommentIconSelect?: string;\r\n    reviewCommentIconActive?: string;\r\n    showInRuler?: boolean\r\n}\r\n\r\ninterface ReviewManagerConfigPrivate {\r\n    rulerMarkerColor: any;\r\n    rulerMarkerDarkColor: any;\r\n    editButtonEnableRemove: boolean;\r\n    lineHeight: number;\r\n    commentIndent: number;\r\n    commentIndentOffset: number;\r\n    editButtonAddText: string;\r\n    editButtonRemoveText: string;\r\n    editButtonOffset: string;\r\n    showInRuler: boolean;\r\n}\r\n\r\n\r\nconst defaultReviewManagerConfig: ReviewManagerConfigPrivate = {\r\n    editButtonOffset: '-10px',\r\n    editButtonAddText: 'Reply',\r\n    editButtonRemoveText: 'Remove',\r\n    editButtonEnableRemove: true,\r\n    lineHeight: 19,\r\n    commentIndent: 20,\r\n    commentIndentOffset: 20,\r\n    showInRuler: true,\r\n    rulerMarkerColor: 'darkorange',\r\n    rulerMarkerDarkColor: 'darkorange'\r\n};\r\n\r\nconst CONTROL_ATTR_NAME = 'ReviewManagerControl';\r\n\r\nclass ReviewManager {\r\n    currentUser: string;\r\n    editor: any;\r\n    comments: ReviewComment[];\r\n    commentState: { [reviewCommentId: string]: ReviewCommentState };\r\n\r\n    activeComment?: ReviewComment;\r\n    widgetInlineToolbar: any;\r\n    widgetInlineCommentEditor: any;\r\n    onChange: OnCommentsChanged;\r\n    editorMode: EditorMode;\r\n    config: ReviewManagerConfigPrivate;\r\n\r\n    textarea: HTMLTextAreaElement;\r\n\r\n\r\n    constructor(editor: any, currentUser: string, onChange: OnCommentsChanged, config?: ReviewManagerConfig) {\r\n        this.currentUser = currentUser;\r\n        this.editor = editor;\r\n        this.activeComment = null;\r\n        this.comments = [];\r\n        this.commentState = {};\r\n        this.widgetInlineToolbar = null;\r\n        this.widgetInlineCommentEditor = null;\r\n        this.onChange = onChange;\r\n        this.editorMode = EditorMode.toolbar;\r\n        this.config = { ...defaultReviewManagerConfig, ...(config || {}) };\r\n\r\n        this.addActions();\r\n        this.createInlineToolbarWidget();\r\n        this.createInlineEditorWidget();\r\n\r\n        this.editor.onMouseDown(this.handleMouseDown.bind(this));\r\n    }\r\n\r\n    load(comments: ReviewComment[]): void {\r\n        this.editor.changeViewZones((changeAccessor) => {\r\n            // Remove all the existing comments     \r\n            for (const viewState of Object.values(this.commentState)) {\r\n                if (viewState.viewZoneId !== null) {\r\n                    changeAccessor.removeZone(viewState.viewZoneId);\r\n                }\r\n            }\r\n\r\n            this.comments = comments || [];\r\n            this.commentState = {};\r\n\r\n            // Check all comments that they have unique and present id's\r\n            for (const comment of comments) {\r\n                const originalId = comment.id;\r\n                let changedId = false;\r\n\r\n                while (!comment.id || this.commentState[comment.id]) {\r\n                    comment.id = uuid();\r\n                    changedId = true;\r\n                }\r\n\r\n                if (changedId) {\r\n                    console.warn('Comment.Id Assigned: ', originalId, ' changed to to ', comment.id, ' due to collision');\r\n                }\r\n\r\n                this.commentState[comment.id] = new ReviewCommentState(this.calculateNumberOfLines(comment.text));\r\n            }\r\n\r\n            this.refreshComments();\r\n\r\n            console.debug('Comments Loaded: ', this.comments.length);\r\n        })\r\n    }\r\n\r\n    calculateNumberOfLines(text: string): number {\r\n        return text.split(/\\r*\\n/).length;\r\n    }\r\n\r\n    getThemedColor(name: string): string {\r\n        // editor.background: e {rgba: e}\r\n        // editor.foreground: e {rgba: e}\r\n        // editor.inactiveSelectionBackground: e {rgba: e}\r\n        // editor.selectionHighlightBackground: e {rgba: e}\r\n        // editorIndentGuide.activeBackground: e {rgba: e}\r\n        // editorIndentGuide.background: e {rgba: e}\r\n        return this.editor._themeService.getTheme().getColor(name);\r\n    }\r\n\r\n    createInlineEditButtonsElement() {\r\n        var root = document.createElement('div') as HTMLDivElement;\r\n        root.className = 'editButtonsContainer'\r\n        root.style.marginLeft = this.config.editButtonOffset;\r\n\r\n        const add = document.createElement('span') as HTMLSpanElement;\r\n        add.innerText = this.config.editButtonAddText;\r\n        add.className = 'editButton add'\r\n        add.setAttribute(CONTROL_ATTR_NAME, '');\r\n        add.onclick = () => this.setEditorMode(EditorMode.editComment);\r\n        root.appendChild(add);\r\n\r\n        if (this.config.editButtonEnableRemove) {\r\n            const spacer = document.createElement('div') as HTMLDivElement;\r\n            spacer.innerText = ' '\r\n            root.appendChild(spacer);\r\n\r\n            const remove = document.createElement('span') as HTMLSpanElement;\r\n            remove.setAttribute(CONTROL_ATTR_NAME, '');\r\n            remove.innerText = this.config.editButtonRemoveText;\r\n            remove.className = 'editButton remove'\r\n            remove.onclick = () => this.removeComment(this.activeComment);\r\n            root.appendChild(remove);\r\n        }\r\n\r\n\r\n        return root;\r\n    }\r\n\r\n    handleCancel() {\r\n        this.setEditorMode(EditorMode.toolbar);\r\n        this.editor.focus();\r\n    }\r\n\r\n    handleSave() {\r\n        const r = this.setEditorMode(EditorMode.toolbar);\r\n        const selection = this.activeComment ? null : this.editor.getSelection() as CodeSelection;\r\n        this.addComment(r.lineNumber, r.text, selection);\r\n        this.editor.focus();\r\n    }\r\n\r\n    handleTextAreaKeyDown(e: KeyboardEvent) {\r\n        if (e.code === \"Escape\") {\r\n            this.handleCancel();\r\n        } else if (e.code === \"Enter\" && e.ctrlKey) {\r\n            this.handleSave();\r\n        }\r\n    }\r\n\r\n    createInlineEditorElement() {\r\n        var root = document.createElement('span') as HTMLSpanElement;\r\n        root.className = \"reviewCommentEdit\"\r\n\r\n        const textarea = document.createElement('textarea') as HTMLTextAreaElement;\r\n        textarea.setAttribute(CONTROL_ATTR_NAME, '');\r\n        textarea.className = \"reviewCommentText\";\r\n        textarea.innerText = '';\r\n        textarea.name = 'text';\r\n        textarea.onkeydown = this.handleTextAreaKeyDown.bind(this);\r\n\r\n        const save = document.createElement('button') as HTMLButtonElement;\r\n        save.setAttribute(CONTROL_ATTR_NAME, '');\r\n        save.className = \"reviewCommentSave\";\r\n        save.innerText = 'Save';\r\n        save.onclick = this.handleSave.bind(this);\r\n\r\n        const cancel = document.createElement('button') as HTMLButtonElement;\r\n        cancel.setAttribute(CONTROL_ATTR_NAME, '');\r\n        cancel.className = \"reviewCommentCancel\";\r\n        cancel.innerText = 'Cancel';\r\n        cancel.onclick = this.handleCancel.bind(this);\r\n\r\n        root.appendChild(textarea);\r\n        root.appendChild(save);\r\n        root.appendChild(cancel);\r\n\r\n        this.textarea = textarea;\r\n        return root\r\n    }\r\n\r\n    createInlineToolbarWidget() {\r\n        const buttonsElement = this.createInlineEditButtonsElement();\r\n\r\n        this.widgetInlineToolbar = {\r\n            allowEditorOverflow: true,\r\n            getId: () => {\r\n                return 'widgetInlineToolbar';\r\n            },\r\n            getDomNode: () => {\r\n                return buttonsElement;\r\n            },\r\n            getPosition: () => {\r\n                if (this.activeComment && this.editorMode == EditorMode.toolbar) {\r\n                    return {\r\n                        position: {\r\n                            lineNumber: this.activeComment.lineNumber + 1,\r\n                        },\r\n                        preference: [monacoWindow.monaco.editor.ContentWidgetPositionPreference.BELOW]\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        this.editor.addContentWidget(this.widgetInlineToolbar);\r\n    }\r\n\r\n    createInlineEditorWidget() {\r\n        const editorElement = this.createInlineEditorElement();\r\n\r\n        this.widgetInlineCommentEditor = {\r\n            allowEditorOverflow: true,\r\n            getId: () => {\r\n                return 'widgetInlineEditor';\r\n            },\r\n            getDomNode: () => {\r\n                return editorElement;\r\n            },\r\n            getPosition: () => {\r\n                if (this.editorMode == EditorMode.editComment) {\r\n                    return {\r\n                        position: {\r\n                            // We are using negative marginTop to shift it above the line to the previous\r\n                            lineNumber: this.activeComment ? this.activeComment.lineNumber + 1 : this.editor.getPosition().lineNumber\r\n                        },\r\n                        preference: [monacoWindow.monaco.editor.ContentWidgetPositionPreference.BELOW]\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        this.editor.addContentWidget(this.widgetInlineCommentEditor);\r\n    }\r\n\r\n    setActiveComment(comment: ReviewComment) {\r\n        console.debug('setActiveComment', comment);\r\n\r\n        const lineNumbersToMakeDirty = [];\r\n        if (this.activeComment && (!comment || this.activeComment.lineNumber !== comment.lineNumber)) {\r\n            lineNumbersToMakeDirty.push(this.activeComment.lineNumber);\r\n        }\r\n        if (comment) {\r\n            lineNumbersToMakeDirty.push(comment.lineNumber);\r\n        }\r\n\r\n        this.activeComment = comment;\r\n        if (lineNumbersToMakeDirty.length > 0) {\r\n            this.filterAndMapComments(lineNumbersToMakeDirty, (comment) => {\r\n                this.commentState[comment.id].renderStatus = ReviewCommentRenderState.dirty;\r\n            });\r\n        }\r\n    }\r\n\r\n    layoutInlineToolbar() {\r\n        const toolbarRoot = this.widgetInlineToolbar.getDomNode() as HTMLElement;\r\n\r\n        if (this.activeComment) {\r\n            toolbarRoot.style.marginTop = `-${this.calculateMarginTopOffset(2)}px`;\r\n        }\r\n        toolbarRoot.style.backgroundColor = this.getThemedColor(\"editor.background\");\r\n        this.editor.layoutContentWidget(this.widgetInlineToolbar);\r\n    }\r\n\r\n    filterAndMapComments(lineNumbers: number[], fn: { (comment: ReviewComment): void }) {\r\n        for (const comment of this.comments) {\r\n            if (lineNumbers.indexOf(comment.lineNumber) > -1) {\r\n                fn(comment);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleMouseDown(ev: { target: { element: { hasAttribute: { (string): boolean } }, detail: any } }) {\r\n        if (!ev.target.element.hasAttribute(CONTROL_ATTR_NAME)) {\r\n            let activeComment: ReviewComment = null;\r\n\r\n            if (ev.target.detail && ev.target.detail.viewZoneId !== null) {\r\n                for (const comment of this.comments) {\r\n                    const viewState = this.commentState[comment.id];\r\n                    if (viewState.viewZoneId == ev.target.detail.viewZoneId) {\r\n                        activeComment = comment;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            this.setActiveComment(activeComment);\r\n            this.refreshComments();\r\n            this.setEditorMode(EditorMode.toolbar);\r\n        }\r\n    }\r\n\r\n    private calculateMarginTopOffset(extraOffsetLines: number = 1): number {\r\n        let idx = 0;\r\n        let count = 0;\r\n        let marginTop: number = 0;\r\n        const lineHeight = this.config.lineHeight;//FIXME - Magic number for line height            \r\n\r\n        if (this.activeComment) {\r\n            for (var item of this.iterateComments()) {\r\n                if (item.comment.lineNumber == this.activeComment.lineNumber) {\r\n                    count++;\r\n                }\r\n\r\n                if (item.comment == this.activeComment) {\r\n                    idx = count + 0;\r\n                }\r\n            }\r\n            marginTop = ((extraOffsetLines + count - idx) * lineHeight);\r\n        }\r\n\r\n        return marginTop;\r\n    }\r\n\r\n    setEditorMode(mode: EditorMode): { lineNumber: number, text: string } {\r\n        console.debug('setEditorMode', this.activeComment);\r\n\r\n        const lineNumber = this.activeComment ? this.activeComment.lineNumber : this.editor.getSelection().endLineNumber;\r\n        this.editorMode = mode;\r\n\r\n        const editorRoot = this.widgetInlineCommentEditor.getDomNode() as HTMLElement;\r\n        editorRoot.style.marginTop = `-${this.calculateMarginTopOffset()}px`;\r\n\r\n        this.layoutInlineToolbar();\r\n        this.editor.layoutContentWidget(this.widgetInlineCommentEditor);\r\n\r\n        const text = this.textarea.value;\r\n        this.textarea.value = \"\";\r\n\r\n        if (mode == EditorMode.editComment) {\r\n            //HACK - because the event in monaco doesn't have preventdefault which means editor takes focus back...            \r\n            setTimeout(() => this.textarea.focus(), 100);\r\n        }\r\n\r\n        return {\r\n            text: text,\r\n            lineNumber: lineNumber //TODO - stop returning this as it is a mess\r\n        };\r\n    }\r\n\r\n    addComment(lineNumber: number, text: string, selection?: CodeSelection): ReviewComment {\r\n        const ln = this.activeComment ? this.activeComment.lineNumber : lineNumber;\r\n        const comment: ReviewComment = {\r\n            id: uuid(),\r\n            lineNumber: ln,\r\n            author: this.currentUser,\r\n            dt: new Date(),\r\n            text: text,\r\n            status: ReviewCommentStatus.active,\r\n            selection: selection,\r\n            parentId: this.activeComment ? this.activeComment.id : null\r\n        };\r\n\r\n        this.commentState[comment.id] = new ReviewCommentState(this.calculateNumberOfLines(text));\r\n        this.comments.push(comment);\r\n\r\n        this.filterAndMapComments([ln], (comment) => {\r\n            this.commentState[comment.id].renderStatus = ReviewCommentRenderState.dirty;\r\n        });\r\n\r\n        this.refreshComments()\r\n        this.layoutInlineToolbar();\r\n\r\n        if (this.onChange) {\r\n            this.onChange(this.comments);\r\n        }\r\n\r\n        return comment;\r\n    }\r\n\r\n    private recurseComments(allComments: { [key: string]: ReviewComment }, filterFn: { (c: ReviewComment): boolean }, depth: number, results: ReviewCommentIterItem[]) {\r\n        const comments = Object.values(allComments).filter(filterFn); //TODO - sort by dt\r\n        for (const comment of comments) {\r\n            delete allComments[comment.id];\r\n\r\n            results.push({\r\n                depth,\r\n                comment,\r\n                viewState: this.commentState[comment.id]\r\n            });\r\n            this.recurseComments(allComments,\r\n                (x) => x.parentId === comment.id,\r\n                depth + 1,\r\n                results);\r\n        }\r\n    }\r\n\r\n    private iterateComments(filterFn?: { (c: ReviewComment): boolean }) {\r\n        if (!filterFn) {\r\n            filterFn = (c: ReviewComment) => !c.parentId;\r\n        }\r\n        const tmpComments: { [key: string]: ReviewComment } = (this.comments).reduce((obj, item) => {\r\n            obj[item.id] = item\r\n            return obj\r\n        }, {});\r\n\r\n        const results: ReviewCommentIterItem[] = [];\r\n        this.recurseComments(tmpComments, filterFn, 0, results);\r\n        return results;\r\n    }\r\n\r\n    removeComment(comment: ReviewComment) {\r\n        for (const item of this.iterateComments((c) => c.id === comment.id)) {\r\n            item.comment.status = ReviewCommentStatus.deleted;\r\n        }\r\n        if (this.activeComment == comment) {\r\n            this.setActiveComment(null);\r\n            this.layoutInlineToolbar();\r\n        }\r\n\r\n        this.refreshComments();\r\n        if (this.onChange) {\r\n            this.onChange(this.comments);\r\n        }\r\n    }\r\n\r\n    refreshComments() {\r\n        this.editor.changeViewZones((changeAccessor) => {\r\n            const lineNumbers: { [key: number]: CodeSelection } = {};\r\n\r\n            for (const item of this.iterateComments()) {\r\n                if (item.comment.status && item.comment.status === ReviewCommentStatus.deleted) {\r\n                    console.debug('Zone.Delete', item.comment.id);\r\n\r\n                    changeAccessor.removeZone(item.viewState.viewZoneId);\r\n                    continue;\r\n                }\r\n\r\n                if (item.viewState.renderStatus === ReviewCommentRenderState.hidden) {\r\n                    console.debug('Zone.Hidden', item.comment.id);\r\n\r\n                    changeAccessor.removeZone(item.viewState.viewZoneId);\r\n                    item.viewState.viewZoneId = null;\r\n\r\n                    continue;\r\n                }\r\n\r\n                if (item.viewState.renderStatus === ReviewCommentRenderState.dirty) {\r\n                    console.debug('Zone.Dirty', item.comment.id);\r\n\r\n                    changeAccessor.removeZone(item.viewState.viewZoneId);\r\n                    item.viewState.viewZoneId = null;\r\n                    item.viewState.renderStatus = ReviewCommentRenderState.normal;\r\n                }\r\n\r\n                if (!lineNumbers[item.comment.lineNumber]) {\r\n                    lineNumbers[item.comment.lineNumber] = item.comment.selection;\r\n                }\r\n\r\n                if (item.viewState.viewZoneId == null) {\r\n                    console.debug('Zone.Create', item.comment.id);\r\n\r\n                    const isActive = this.activeComment == item.comment;\r\n\r\n                    const domNode = document.createElement('span') as HTMLSpanElement;\r\n                    domNode.style.marginLeft = (this.config.commentIndent * (item.depth + 1)) + this.config.commentIndentOffset + \"px\";\r\n                    domNode.style.backgroundColor = this.getThemedColor(\"editor.selectionHighlightBackground\");\r\n                    domNode.className = `reviewComment ${isActive ? 'active' : ' inactive'}`;\r\n\r\n                    const author = document.createElement('span') as HTMLSpanElement;\r\n                    author.className = 'reviewComment author'\r\n                    author.innerText = `${item.comment.author || ' '} at `;\r\n\r\n                    const dt = document.createElement('span') as HTMLSpanElement;\r\n                    dt.className = 'reviewComment dt'\r\n                    dt.innerText = item.comment.dt.toLocaleString();\r\n\r\n                    const text = document.createElement('span') as HTMLSpanElement;\r\n                    text.className = 'reviewComment text'\r\n                    text.innerText = `${item.comment.text} by `;\r\n\r\n                    domNode.appendChild(text);\r\n                    domNode.appendChild(author);\r\n                    domNode.appendChild(dt);\r\n\r\n                    item.viewState.viewZoneId = changeAccessor.addZone({\r\n                        afterLineNumber: item.comment.lineNumber,\r\n                        heightInLines: item.viewState.numberOfLines,\r\n                        domNode: domNode,\r\n                        suppressMouseDown: true // This stops focus being lost the editor - meaning keyboard shortcuts keeps working\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (this.config.showInRuler) {\r\n                const decorators = [];\r\n                for (const [ln, selection] of Object.entries(lineNumbers)) {\r\n\r\n                    decorators.push({\r\n                        range: new monacoWindow.monaco.Range(ln, 0, ln, 0),\r\n                        options: {\r\n                            isWholeLine: true,\r\n                            overviewRuler: {\r\n                                color: this.config.rulerMarkerColor,\r\n                                darkColor: this.config.rulerMarkerDarkColor,\r\n                                position: 1\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    if (selection) {\r\n                        decorators.push({\r\n                            range: new monacoWindow.monaco.Range(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn),\r\n                            options: {\r\n                                className: 'reviewComment selection',\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n\r\n                //TODO - Preserver any other decorators\r\n                this.editor.deltaDecorations([], decorators);\r\n            }\r\n        });\r\n    }\r\n\r\n    addActions() {\r\n        this.editor.addAction({\r\n            id: 'my-unique-id-add',\r\n            label: 'Add Comment',\r\n            keybindings: [\r\n                monacoWindow.monaco.KeyMod.CtrlCmd | monacoWindow.monaco.KeyCode.F10,\r\n            ],\r\n            precondition: null,\r\n            keybindingContext: null,\r\n            contextMenuGroupId: 'navigation',\r\n            contextMenuOrder: 0,\r\n\r\n            run: () => {\r\n                this.setEditorMode(EditorMode.editComment);\r\n            }\r\n        });\r\n\r\n        this.editor.addAction({\r\n            id: 'my-unique-id-next',\r\n            label: 'Next Comment',\r\n            keybindings: [\r\n                monacoWindow.monaco.KeyMod.CtrlCmd | monacoWindow.monaco.KeyCode.F12,\r\n            ],\r\n            precondition: null,\r\n            keybindingContext: null,\r\n            contextMenuGroupId: 'navigation',\r\n            contextMenuOrder: 0.1,\r\n\r\n            run: () => {\r\n                this.navigateToComment(NavigationDirection.next);\r\n            }\r\n        });\r\n\r\n        this.editor.addAction({\r\n            id: 'my-unique-id-prev',\r\n            label: 'Prev Comment',\r\n            keybindings: [\r\n                monacoWindow.monaco.KeyMod.CtrlCmd | monacoWindow.monaco.KeyCode.F11,\r\n            ],\r\n            precondition: null,\r\n            keybindingContext: null,\r\n            contextMenuGroupId: 'navigation',\r\n            contextMenuOrder: 0.1,\r\n\r\n            run: () => {\r\n                this.navigateToComment(NavigationDirection.prev);\r\n            }\r\n        });\r\n    }\r\n\r\n    navigateToComment(direction: NavigationDirection) {\r\n        let currentLine = 0;\r\n        if (this.activeComment) {\r\n            currentLine = this.activeComment.lineNumber;\r\n        } else {\r\n            currentLine = this.editor.getPosition().lineNumber;\r\n        }\r\n\r\n        const comments = this.comments.filter((c) => {\r\n            if (c.status !== ReviewCommentStatus.deleted && !c.parentId ) {\r\n                if (direction === NavigationDirection.next) {\r\n                    return c.lineNumber > currentLine;\r\n                } else if (direction === NavigationDirection.prev) {\r\n                    return c.lineNumber < currentLine;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (comments.length) {\r\n            comments.sort((a, b) => {\r\n                if (direction === NavigationDirection.next) {\r\n                    return a.lineNumber - b.lineNumber;\r\n                } else if (direction === NavigationDirection.prev) {\r\n                    return b.lineNumber - a.lineNumber;\r\n                }\r\n            });\r\n\r\n            const comment = comments[0];\r\n            this.setActiveComment(comment)\r\n            this.refreshComments();\r\n            this.layoutInlineToolbar();\r\n            this.editor.revealLineInCenter(comment.lineNumber);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nenum NavigationDirection {\r\n    next = 1,\r\n    prev = 2\r\n}\r\n\r\nenum EditorMode {\r\n    editComment = 1,\r\n    toolbar = 2\r\n}\r\n\r\nenum ReviewCommentRenderState {\r\n    dirty = 1,\r\n    hidden = 2,\r\n    normal = 3\r\n}"],"sourceRoot":""}