{"version":3,"sources":["webpack://MonacoEditorCodeReview/webpack/bootstrap","webpack://MonacoEditorCodeReview/./node_modules/uuid/lib/bytesToUuid.js","webpack://MonacoEditorCodeReview/./node_modules/uuid/lib/rng-browser.js","webpack://MonacoEditorCodeReview/./node_modules/uuid/v4.js","webpack://MonacoEditorCodeReview/./src/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import * as uuid from \"uuid/v4\";\nimport * as monacoEditor from \"monaco-editor\";\n\n\n\ninterface MonacoWindow {\n    monaco: any;\n}\n\nconst monacoWindow = (window as any) as MonacoWindow;\n\nexport interface ReviewComment {\n    id?: string;\n    parentId?: string;\n    author: string;\n    dt: Date | string;\n    lineNumber: number;\n    text: string;\n    selection?: CodeSelection;\n    status?: ReviewCommentStatus;\n}\n\nexport enum ReviewCommentStatus {\n    active = 1,\n    deleted = 2,\n    edit = 3,\n}\n\nenum NavigationDirection {\n    next = 1,\n    prev = 2\n}\n\nexport enum EditorMode {\n    insertComment = 1,\n    editComment = 2,\n    toolbar = 3\n}\n\nenum ReviewCommentRenderState {\n    dirty = 1,\n    hidden = 2,\n    normal = 3\n}\n\ninterface CodeSelection {\n    startColumn: number,\n    endColumn: number,\n    startLineNumber: number,\n    endLineNumber: number\n}\n\nclass ReviewCommentState {\n    viewZoneId: string;\n    renderStatus: ReviewCommentRenderState;\n    numberOfLines: number;\n    comment: ReviewComment;\n    history: ReviewComment[];\n\n    constructor(comment: ReviewComment, numberOfLines: number) {\n        this.renderStatus = ReviewCommentRenderState.normal;\n        this.viewZoneId = null;\n        this.comment = comment;\n        this.numberOfLines = numberOfLines;\n        this.history = []\n    }\n}\n\nexport function createReviewManager(editor: any, currentUser: string, comments?: ReviewComment[], onChange?: OnCommentsChanged, config?: ReviewManagerConfig): ReviewManager {\n    //For Debug: (window as any).editor = editor;\n    const rm = new ReviewManager(editor, currentUser, onChange, config);\n    rm.load(comments || []);\n    return rm;\n}\n\n\ninterface ReviewCommentIterItem {\n    depth: number;\n    state: ReviewCommentState\n}\n\ninterface OnCommentsChanged {\n    (comments: ReviewComment[]): void\n}\n\nexport interface ReviewManagerConfig {\n    editButtonEnableRemove?: boolean;\n    commentIndent?: number;\n    commentIndentOffset?: number;\n    editButtonAddText?: string;\n    editButtonRemoveText?: string;\n    editButtonOffset?: string;\n    reviewCommentIconSelect?: string;\n    reviewCommentIconActive?: string;\n    showInRuler?: boolean\n    verticalOffset?: number;\n    formatDate?: { (dt: Date): string }\n}\n\ninterface ReviewManagerConfigPrivate {\n    rulerMarkerColor: any;\n    rulerMarkerDarkColor: any;\n    editButtonEnableRemove: boolean;\n    editButtonEnableEdit: boolean;\n    commentIndent: number;\n    commentIndentOffset: number;\n    editButtonAddText: string;\n    editButtonRemoveText: string;\n    editButtonEditText: string;\n    editButtonOffset: string;\n    verticalOffset: number;\n    showInRuler: boolean;\n    formatDate?: { (dt: Date | string): string };\n    showAddCommentGlyph: boolean\n}\n\n\nconst defaultReviewManagerConfig: ReviewManagerConfigPrivate = {\n    verticalOffset: 0,\n    editButtonOffset: '-10px',\n    editButtonAddText: 'Reply',\n    editButtonRemoveText: 'Remove',\n    editButtonEditText: 'Edit',\n    editButtonEnableRemove: true,\n    editButtonEnableEdit: true,\n    commentIndent: 20,\n    commentIndentOffset: 20,\n    showInRuler: true,\n    rulerMarkerColor: 'darkorange',\n    rulerMarkerDarkColor: 'darkorange',\n    formatDate: null,\n    showAddCommentGlyph: true,\n};\n\nconst CONTROL_ATTR_NAME = 'ReviewManagerControl';\nconst POSITION_BELOW = 2; //above=1, below=2, exact=0\n\n\ninterface EditorElements {\n    confirm: HTMLButtonElement;\n    cancel: HTMLButtonElement;\n    root: HTMLSpanElement\n    textarea: HTMLTextAreaElement;\n}\n\ninterface InlineToolbarElements {\n    root: HTMLDivElement;\n    add: HTMLSpanElement;\n    remove: HTMLSpanElement;\n    edit: HTMLSpanElement;\n}\n\nexport class ReviewManager {\n    currentUser: string;\n    editor: monacoEditor.editor.IStandaloneCodeEditor;\n    editorConfig: monacoEditor.editor.InternalEditorOptions;\n    commentState: { [reviewCommentId: string]: ReviewCommentState };\n    comments: ReviewComment[];\n    activeComment?: ReviewComment;\n    widgetInlineToolbar: monacoEditor.editor.IContentWidget;\n    widgetInlineCommentEditor: monacoEditor.editor.IContentWidget;\n    onChange: OnCommentsChanged;\n    editorMode: EditorMode;\n    config: ReviewManagerConfigPrivate;\n    currentLineDecorations: string[];\n    currentCommentDecorations: string[];\n    currentLineDecorationLineNumber?: number;\n    viewZoneIdsToDelete: string[];\n\n    editorElements: EditorElements;\n    inlineToolbarElements: InlineToolbarElements;\n    verbose: boolean;\n\n    constructor(editor: any, currentUser: string, onChange: OnCommentsChanged, config?: ReviewManagerConfig) {\n        this.currentUser = currentUser;\n        this.editor = editor;\n        this.activeComment = null;\n        this.commentState = {};\n        this.widgetInlineToolbar = null;\n        this.widgetInlineCommentEditor = null;\n        this.onChange = onChange;\n        this.editorMode = EditorMode.toolbar;\n        this.config = { ...defaultReviewManagerConfig, ...(config || {}) };\n        this.currentLineDecorations = [];\n        this.currentCommentDecorations = []\n        this.currentLineDecorationLineNumber = null;\n        this.comments = [];\n        this.viewZoneIdsToDelete = []\n        this.verbose = false;\n\n        this.editorConfig = this.editor.getConfiguration();\n        this.editor.onDidChangeConfiguration(() => this.editorConfig = this.editor.getConfiguration());\n        this.editor.onMouseDown(this.handleMouseDown.bind(this));\n\n        this.inlineToolbarElements = this.createInlineToolbarWidget();\n        this.editorElements = this.createInlineEditorWidget();\n        this.addActions();\n\n        if (this.config.showAddCommentGlyph) {\n            this.editor.onMouseMove(this.handleMouseMove.bind(this));\n        }\n    }\n\n    load(comments: ReviewComment[]): void {\n        this.editor.changeViewZones((changeAccessor) => {\n            // Remove all the existing comments     \n            for (const viewState of Object.values(this.commentState)) {\n                if (viewState.viewZoneId !== null) {\n                    changeAccessor.removeZone(viewState.viewZoneId);\n                }\n            }\n\n            this.commentState = {};\n\n            // Check all comments that they have unique and present id's\n            for (const comment of comments) {\n                const originalId = comment.id;\n                let changedId = false;\n\n                while (!comment.id || this.commentState[comment.id]) {\n                    comment.id = uuid();\n                    changedId = true;\n                }\n\n                if (changedId) {\n                    console.warn('Comment.Id Assigned: ', originalId, ' changed to to ', comment.id, ' due to collision');\n                }\n\n                this.commentState[comment.id] = new ReviewCommentState(comment, this.calculateNumberOfLines(comment.text));\n            }\n            this.comments = comments;\n            this.processUpdates(comments);\n\n            this.refreshComments();\n\n            console.debug('Comments Loaded: ', Object.values(this.commentState).length);\n        })\n    }\n\n    //TODO ...\n    //TODO - type - TODO, QUESTION\n\n    private processUpdates(comments: ReviewComment[]) {\n        const updates = comments.filter(c => c.status === ReviewCommentStatus.edit || c.status === ReviewCommentStatus.deleted)//TODO.sort(this.compareComments);\n        const deletedIds: string[] = [];\n        for (const c of updates) {\n            const parent = this.commentState[c.parentId];\n            if (parent) {\n                if (parent.history.length === 0) {\n                    parent.history.push(parent.comment);\n                }\n\n                parent.history.push(c);\n\n                switch (c.status) {\n                    case ReviewCommentStatus.edit:\n                        //Copy the text + author onto new comment -  preserve id, parentId, and dt from the original\n                        parent.comment = { ...parent.comment, text: c.text, author: c.author };\n                        break;\n                    case ReviewCommentStatus.deleted:\n                        delete this.commentState[parent.comment.id];\n                        this.viewZoneIdsToDelete.push(parent.viewZoneId);\n                        deletedIds.push(parent.comment.id);\n                        break;\n                }\n            }\n            console.log('Removing', c.id, 'from comments because it has been processed as a', ReviewCommentStatus[c.status]);\n            delete this.commentState[c.id]; //mutation of state - removal of comment as it is processed.            \n        }\n\n        this.verbose && console.log('Processed', updates.length, 'editted comments');\n    }\n\n    calculateNumberOfLines(text: string): number {\n        return text ? text.split(/\\r*\\n/).length + 1 : 1;\n    }\n\n    getThemedColor(name: string): string {\n        // editor.background: e {rgba: e}\n        // editor.foreground: e {rgba: e}\n        // editor.inactiveSelectionBackground: e {rgba: e}\n        // editor.selectionHighlightBackground: e {rgba: e}\n        // editorIndentGuide.activeBackground: e {rgba: e}\n        // editorIndentGuide.background: e {rgba: e}\n        const theme = (this.editor as any)._themeService.getTheme();\n        let value = theme.getColor(name);\n\n        // HACK - Buttons themes are not in monaco ... so just hack in theme for dark\n        const missingThemes = {\n            'dark': {\n                \"button.background\": \"#0e639c\",\n                \"button.foreground\": \"#ffffff\",\n            },\n            'light': {\n                \"button.background\": \"#007acc\",\n                \"button.foreground\": \"#ffffff\"\n            }\n        }\n        if (!value) {\n            value = missingThemes[theme.themeName.indexOf('dark') > -1 ? 'dark' : 'light'][name];\n        }\n        return value;\n    }\n\n    createInlineEditButtonsElement(): InlineToolbarElements {\n        var root = document.createElement('div') as HTMLDivElement;\n        root.className = 'editButtonsContainer'\n        root.style.marginLeft = this.config.editButtonOffset;\n\n        const add = document.createElement('span') as HTMLSpanElement;\n        add.innerText = this.config.editButtonAddText;\n        add.className = 'editButton add'\n        add.setAttribute(CONTROL_ATTR_NAME, '');\n        add.onclick = () => this.setEditorMode(EditorMode.insertComment);\n        root.appendChild(add);\n\n        let remove = null;\n        let edit = null;\n\n        if (this.config.editButtonEnableRemove) {\n            const spacer = document.createElement('div') as HTMLDivElement;\n            spacer.innerText = ' '\n            root.appendChild(spacer);\n\n            remove = document.createElement('span') as HTMLSpanElement;\n            remove.setAttribute(CONTROL_ATTR_NAME, '');\n            remove.innerText = this.config.editButtonRemoveText;\n            remove.className = 'editButton remove'\n            remove.onclick = () => this.removeComment(this.activeComment);\n            root.appendChild(remove);\n        }\n\n        if (this.config.editButtonEnableEdit) {\n            const spacer = document.createElement('div') as HTMLDivElement;\n            spacer.innerText = ' '\n            root.appendChild(spacer);\n\n            edit = document.createElement('span') as HTMLSpanElement;\n            edit.setAttribute(CONTROL_ATTR_NAME, '');\n            edit.innerText = this.config.editButtonEditText;\n            edit.className = 'editButton edit'\n            edit.onclick = () => this.setEditorMode(EditorMode.editComment);\n            root.appendChild(edit);\n        }\n\n        return { root, add, remove, edit };\n    }\n\n    handleCancel() {\n        this.setEditorMode(EditorMode.toolbar);\n        this.editor.focus();\n    }\n\n    handleAddComment() {\n        const lineNumber = this.activeComment ? this.activeComment.lineNumber : this.editor.getSelection().endLineNumber;\n        const text = this.editorElements.textarea.value;\n        const selection = this.activeComment ? null : this.editor.getSelection() as CodeSelection;\n        this.addComment(lineNumber, text, selection);\n        this.setEditorMode(EditorMode.toolbar);\n        this.editor.focus();\n    }\n\n    handleTextAreaKeyDown(e: KeyboardEvent) {\n        if (e.code === \"Escape\") {\n            this.handleCancel();\n            e.preventDefault();\n        } else if (e.code === \"Enter\" && e.ctrlKey) {\n            this.handleAddComment();\n            e.preventDefault();\n        }\n    }\n\n    createInlineEditorElement(): EditorElements {\n        var root = document.createElement('span') as HTMLSpanElement;\n        root.className = \"reviewCommentEditor\"\n\n        const textarea = document.createElement('textarea') as HTMLTextAreaElement;\n        textarea.setAttribute(CONTROL_ATTR_NAME, '');\n        textarea.className = \"reviewCommentEditor text\";\n        textarea.innerText = '';\n        textarea.style.resize = \"none\";\n        textarea.name = 'text';\n        textarea.onkeydown = this.handleTextAreaKeyDown.bind(this);\n\n        const confirm = document.createElement('button') as HTMLButtonElement;\n        confirm.setAttribute(CONTROL_ATTR_NAME, '');\n        confirm.className = \"reviewCommentEditor save\";\n        confirm.style.fontFamily = \"Consolas\";\n        confirm.innerText = 'Add Comment';\n        confirm.onclick = this.handleAddComment.bind(this);\n\n        const cancel = document.createElement('button') as HTMLButtonElement;\n        cancel.setAttribute(CONTROL_ATTR_NAME, '');\n        cancel.className = \"reviewCommentEditor cancel\";\n        cancel.innerText = 'Cancel';\n        cancel.onclick = this.handleCancel.bind(this);\n\n        root.appendChild(textarea);\n        root.appendChild(cancel);\n        root.appendChild(confirm);\n\n        return { root, confirm, cancel, textarea };\n    }\n\n    createInlineToolbarWidget() {\n        const buttonsElement = this.createInlineEditButtonsElement();\n        const this_ = this;\n\n        this.widgetInlineToolbar = {\n            allowEditorOverflow: true,\n            getId: () => {\n                return 'widgetInlineToolbar';\n            },\n            getDomNode: () => {\n                return buttonsElement.root;\n            },\n            getPosition: () => {\n                if (this_.activeComment && this_.editorMode == EditorMode.toolbar) {\n                    return {\n                        position: {\n                            lineNumber: this_.activeComment.lineNumber,\n                            column: 1\n                        },\n                        preference: [POSITION_BELOW]\n                    }\n                }\n            }\n        };\n\n        this.editor.addContentWidget(this.widgetInlineToolbar);\n        return buttonsElement;\n    }\n\n    createInlineEditorWidget(): EditorElements {\n        // doesn't re-theme when\n        const editorElement = this.createInlineEditorElement();\n\n        this.widgetInlineCommentEditor = {\n            allowEditorOverflow: true,\n            getId: () => {\n                return 'widgetInlineEditor';\n            },\n            getDomNode: () => {\n                return editorElement.root;\n            },\n            getPosition: () => {\n                if (this.editorMode == EditorMode.insertComment || this.editorMode == EditorMode.editComment) {\n                    return {\n                        position: {\n                            lineNumber: this.activeComment ? this.activeComment.lineNumber : this.editor.getPosition().lineNumber + 1,\n                            column: 1\n                        },\n                        preference: [POSITION_BELOW]\n                    }\n                }\n            }\n        };\n\n        this.editor.addContentWidget(this.widgetInlineCommentEditor);\n        return editorElement;\n    }\n\n    setActiveComment(comment: ReviewComment) {\n        console.debug('setActiveComment', comment);\n\n        const lineNumbersToMakeDirty = [];\n        if (this.activeComment && (!comment || this.activeComment.lineNumber !== comment.lineNumber)) {\n            lineNumbersToMakeDirty.push(this.activeComment.lineNumber);\n        }\n        if (comment) {\n            lineNumbersToMakeDirty.push(comment.lineNumber);\n        }\n\n        this.activeComment = comment;\n        if (lineNumbersToMakeDirty.length > 0) {\n            this.filterAndMapComments(lineNumbersToMakeDirty, (comment) => {\n                this.commentState[comment.id].renderStatus = ReviewCommentRenderState.dirty;\n            });\n        }\n    }\n\n    filterAndMapComments(lineNumbers: number[], fn: { (comment: ReviewComment): void }) {\n        for (const cs of Object.values(this.commentState)) {\n            if (lineNumbers.indexOf(cs.comment.lineNumber) > -1) {\n                fn(cs.comment);\n            }\n        }\n    }\n\n    handleMouseMove(ev) {\n        if (ev.target && ev.target.position && ev.target.position.lineNumber) {\n            this.currentLineDecorationLineNumber = ev.target.position.lineNumber;\n            this.currentLineDecorations = this.editor.deltaDecorations(this.currentLineDecorations, [\n                {\n                    range: new monacoWindow.monaco.Range(ev.target.position.lineNumber, 0, ev.target.position.lineNumber, 0),\n                    options: {\n                        marginClassName: 'activeLineMarginClass',\n                        zIndex: 100\n                    }\n                }\n            ]);\n        }\n    }\n\n    handleMouseDown(ev: { target: { element: { className: string, hasAttribute: { (string): boolean } }, detail: any } }) {\n        // Not ideal - but couldn't figure out a different way to identify the glyph event        \n        if (ev.target.element.className && ev.target.element.className.indexOf('activeLineMarginClass') > -1) {\n            this.editor.setPosition({\n                lineNumber: this.currentLineDecorationLineNumber,\n                column: 1\n            });\n            this.setEditorMode(EditorMode.insertComment);\n        } else if (!ev.target.element.hasAttribute(CONTROL_ATTR_NAME)) {\n            let activeComment: ReviewComment = null;\n\n            if (ev.target.detail && ev.target.detail.viewZoneId !== null) {\n                for (const comment of Object.values(this.commentState).map(c => c.comment)) {\n                    const viewState = this.commentState[comment.id];\n                    if (viewState.viewZoneId == ev.target.detail.viewZoneId) {\n                        activeComment = comment;\n                        break;\n                    }\n                }\n            }\n            this.setActiveComment(activeComment);\n            this.refreshComments();\n            this.setEditorMode(EditorMode.toolbar);\n        }\n    }\n\n    private calculateMarginTopOffset(includeActiveCommentHeight: boolean): number {\n        let count = 0;\n        let marginTop = 0;\n        const lineHeight = this.editorConfig.fontInfo.lineHeight;\n\n        if (this.activeComment) {\n            for (var item of this.iterateComments()) {\n                if (item.state.comment.lineNumber === this.activeComment.lineNumber &&\n                    (item.state.comment != this.activeComment || includeActiveCommentHeight)) {\n                    count += this.calculateNumberOfLines(item.state.comment.text);\n                }\n\n                if (item.state.comment == this.activeComment) {\n                    break;\n                }\n            }\n            marginTop = count * lineHeight;\n        }\n        const result = marginTop + this.config.verticalOffset;\n        return result;\n    }\n\n    layoutInlineToolbar() {\n        this.inlineToolbarElements.root.style.backgroundColor = this.getThemedColor(\"editor.background\");\n        this.inlineToolbarElements.root.style.marginTop = `${this.calculateMarginTopOffset(false)}px`;\n\n        if (this.inlineToolbarElements.remove) {\n            const hasChildren = this.activeComment && this.iterateComments((c) => c.comment.id === this.activeComment.id).length > 1\n            const isSameUser = this.activeComment && this.activeComment.author === this.currentUser;\n            this.inlineToolbarElements.remove.style.display = hasChildren ? 'none' : '';\n            this.inlineToolbarElements.edit.style.display = hasChildren || !isSameUser ? 'none' : '';\n        }\n\n        this.editor.layoutContentWidget(this.widgetInlineToolbar);\n    }\n\n    layoutInlineCommentEditor() {\n        const root = this.widgetInlineCommentEditor.getDomNode() as HTMLElement;\n\n        Array.prototype.slice.call(root.getElementsByTagName('textarea')).concat([root]).forEach(e => {\n            e.style.backgroundColor = this.getThemedColor(\"editor.background\");\n            e.style.color = this.getThemedColor(\"editor.foreground\");\n        })\n\n        Array.prototype.slice.call(root.getElementsByTagName('button'))\n            .forEach((button) => {\n                button.style.backgroundColor = this.getThemedColor(\"button.background\");\n                button.style.color = this.getThemedColor(\"button.foreground\");\n            });\n\n        this.editorElements.confirm.innerText = this.editorMode === EditorMode.insertComment ? \"Add Comment\" : \"Edit Comment\";\n\n        root.style.marginTop = `${this.calculateMarginTopOffset(true)}px`;\n        this.editor.layoutContentWidget(this.widgetInlineCommentEditor);\n    }\n\n    setEditorMode(mode: EditorMode) {\n        console.debug('setEditorMode', EditorMode[mode], this.activeComment);\n\n        this.editorMode = mode;\n\n        this.layoutInlineCommentEditor();\n        this.layoutInlineToolbar();\n\n        if (mode == EditorMode.insertComment || mode == EditorMode.editComment) {\n            if (mode == EditorMode.insertComment) {\n                this.editorElements.textarea.value = \"\";\n            } else if (mode == EditorMode.editComment) {\n                this.editorElements.textarea.value = this.activeComment.text;\n            }\n            //HACK - because the event in monaco doesn't have preventdefault which means editor takes focus back...                        \n            setTimeout(() => this.editorElements.textarea.focus(), 100);//TODO - make configurable\n        }\n    }\n\n    getDateTimeNow() {\n        return new Date();\n    }\n\n    private compareComments(a: ReviewCommentState, b: ReviewCommentState) {\n        return a.comment.dt > b.comment.dt ? 1 : -1;\n    }\n\n    private recurseComments(allComments: { [key: string]: ReviewCommentState }, filterFn: { (c: ReviewCommentState): boolean }, depth: number, results: ReviewCommentIterItem[]) {\n        const comments = Object.values(allComments).filter(filterFn).sort(this.compareComments);\n        for (const cs of comments) {\n            const comment = cs.comment;\n            delete allComments[comment.id];\n\n            results.push({\n                depth,\n                state: cs\n            });\n            this.recurseComments(allComments,\n                (x) => x.comment.parentId === comment.id,\n                depth + 1,\n                results);\n        }\n    }\n\n    private iterateComments(filterFn?: { (c: ReviewCommentState): boolean }) {\n        if (!filterFn) {\n            filterFn = (cs: ReviewCommentState) => !cs.comment.parentId;\n        }\n        const copyCommentState = { ...this.commentState };\n        const results: ReviewCommentIterItem[] = [];\n        this.recurseComments(copyCommentState, filterFn, 0, results);\n        return results;\n    }\n\n    removeComment(comment: ReviewComment): ReviewComment {\n        if (comment) {\n            return this.createNewComment(ReviewCommentStatus.deleted, null, null, null, comment);\n        }\n        return null\n    }\n\n    addComment(lineNumber: number, text: string, selection?: CodeSelection): ReviewComment {\n        const status = this.editorMode === EditorMode.editComment ? ReviewCommentStatus.edit : ReviewCommentStatus.active\n        return this.createNewComment(status, text, lineNumber, selection, this.activeComment);\n    }\n\n    private createNewComment(status: ReviewCommentStatus, text: string, lineNumber?: number, selection?: CodeSelection, activeComment?: ReviewComment): ReviewComment {\n        const ln = activeComment ? activeComment.lineNumber : lineNumber;\n        const comment: ReviewComment = {\n            id: uuid(),\n            lineNumber: ln,\n            author: this.currentUser,\n            dt: this.getDateTimeNow(),\n            text,\n            status,\n            selection,\n            parentId: activeComment ? activeComment.id : null,\n        };\n\n        this.comments.push(comment);\n        this.commentState[comment.id] = new ReviewCommentState(comment, this.calculateNumberOfLines(text));\n\n        this.processUpdates([comment]);\n\n        // Make all comments for this line as dirty.\n        this.filterAndMapComments([ln], (c) => {\n            this.commentState[c.id].renderStatus = ReviewCommentRenderState.dirty;\n        });\n\n        if (this.activeComment && !this.commentState[this.activeComment.id]) {\n            this.setActiveComment(null);\n        } else if (this.activeComment && this.activeComment.status === ReviewCommentStatus.deleted) {\n            this.setActiveComment(null);\n            console.log('Clearing active comment');\n        }\n\n        this.refreshComments()\n        this.layoutInlineToolbar();\n\n        if (this.onChange) {\n            this.onChange(this.comments);\n        }\n\n        return comment;\n    }\n\n\n    private formatDate(dt: Date | string) {\n        if (this.config.formatDate) {\n            return this.config.formatDate(dt)\n        } else if (dt instanceof Date) {\n            return dt.toISOString();\n        } else {\n            return dt;\n        }\n    }\n\n    private createElement(text: string, className: string, tagName: string = null) {\n        const span = document.createElement(tagName || 'span') as HTMLSpanElement;\n        span.className = className;\n        span.innerText = text;\n        return span;\n    }\n\n    refreshComments() {\n        this.editor.changeViewZones((changeAccessor: {\n            addZone: { (zone: { afterLineNumber: number, heightInLines: number, domNode: HTMLElement, suppressMouseDown: boolean }): string },\n            removeZone: { (id: string): void }\n        }) => {\n            const lineNumbers: { [key: number]: CodeSelection } = {};\n\n            while (this.viewZoneIdsToDelete.length > 0) {\n                const viewZoneId = this.viewZoneIdsToDelete.pop();\n                changeAccessor.removeZone(viewZoneId);\n                this.verbose && console.debug('Zone.Delete', viewZoneId);\n            }\n\n            for (const item of this.iterateComments()) {\n                if (item.state.renderStatus === ReviewCommentRenderState.hidden) {\n                    this.verbose && console.debug('Zone.Hidden', item.state.comment.id);\n\n                    changeAccessor.removeZone(item.state.viewZoneId);\n                    item.state.viewZoneId = null;\n\n                    continue;\n                }\n\n                if (item.state.renderStatus === ReviewCommentRenderState.dirty) {\n                    this.verbose && console.debug('Zone.Dirty', item.state.comment.id);\n\n                    changeAccessor.removeZone(item.state.viewZoneId);\n                    item.state.viewZoneId = null;\n                    item.state.renderStatus = ReviewCommentRenderState.normal;\n                }\n\n                if (!lineNumbers[item.state.comment.lineNumber]) {\n                    lineNumbers[item.state.comment.lineNumber] = item.state.comment.selection;\n                }\n\n                if (item.state.viewZoneId == null) {\n                    this.verbose && console.debug('Zone.Create', item.state.comment.id);\n\n                    const isActive = this.activeComment == item.state.comment;\n\n                    const domNode = this.createElement(\"\", `reviewComment ${isActive ? 'active' : ' inactive'}`);\n                    domNode.style.marginLeft = (this.config.commentIndent * (item.depth + 1)) + this.config.commentIndentOffset + \"px\";\n                    domNode.style.backgroundColor = this.getThemedColor(\"editor.selectionHighlightBackground\");\n\n                    // For Debug - domNode.appendChild(this.createElement(`${item.state.comment.id}`, 'reviewComment id'))\n\n                    domNode.appendChild(this.createElement(`${item.state.comment.author || ' '} at `, 'reviewComment author'));\n                    domNode.appendChild(this.createElement(this.formatDate(item.state.comment.dt), 'reviewComment dt'))\n                    if (item.state.history.length) {\n                        domNode.appendChild(this.createElement(`(Edited ${item.state.history.length - 1} times)`, 'reviewComment history'))\n                    }\n                    domNode.appendChild(this.createElement(`${item.state.comment.text}`, 'reviewComment text', 'div'))\n\n                    item.state.viewZoneId = changeAccessor.addZone({\n                        afterLineNumber: item.state.comment.lineNumber,\n                        heightInLines: item.state.numberOfLines,\n                        domNode: domNode,\n                        suppressMouseDown: true // This stops focus being lost the editor - meaning keyboard shortcuts keeps working\n                    });\n                }\n            }\n\n            if (this.config.showInRuler) {\n                const decorators = [];\n                for (const [ln, selection] of Object.entries(lineNumbers)) {\n\n                    decorators.push({\n                        range: new monacoWindow.monaco.Range(ln, 0, ln, 0),\n                        options: {\n                            isWholeLine: true,\n                            overviewRuler: {\n                                color: this.config.rulerMarkerColor,\n                                darkColor: this.config.rulerMarkerDarkColor,\n                                position: 1\n                            }\n                        }\n                    })\n\n                    if (selection) {\n                        decorators.push({\n                            range: new monacoWindow.monaco.Range(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn),\n                            options: {\n                                className: 'reviewComment selection',\n                            }\n                        })\n                    }\n                }\n\n                this.currentCommentDecorations = this.editor.deltaDecorations(this.currentCommentDecorations, decorators);\n            }\n        });\n    }\n\n    addActions() {\n        this.editor.addAction({\n            id: 'my-unique-id-add',\n            label: 'Add Comment',\n            keybindings: [\n                monacoWindow.monaco.KeyMod.CtrlCmd | monacoWindow.monaco.KeyCode.F10,\n            ],\n            precondition: null,\n            keybindingContext: null,\n            contextMenuGroupId: 'navigation',\n            contextMenuOrder: 0,\n\n            run: () => {\n                this.setEditorMode(EditorMode.insertComment);\n            }\n        });\n\n        this.editor.addAction({\n            id: 'my-unique-id-next',\n            label: 'Next Comment',\n            keybindings: [\n                monacoWindow.monaco.KeyMod.CtrlCmd | monacoWindow.monaco.KeyCode.F12,\n            ],\n            precondition: null,\n            keybindingContext: null,\n            contextMenuGroupId: 'navigation',\n            contextMenuOrder: 0.1,\n\n            run: () => {\n                this.navigateToComment(NavigationDirection.next);\n            }\n        });\n\n        this.editor.addAction({\n            id: 'my-unique-id-prev',\n            label: 'Prev Comment',\n            keybindings: [\n                monacoWindow.monaco.KeyMod.CtrlCmd | monacoWindow.monaco.KeyCode.F11,\n            ],\n            precondition: null,\n            keybindingContext: null,\n            contextMenuGroupId: 'navigation',\n            contextMenuOrder: 0.1,\n\n            run: () => {\n                this.navigateToComment(NavigationDirection.prev);\n            }\n        });\n    }\n\n    navigateToComment(direction: NavigationDirection) {\n        let currentLine = 0;\n        if (this.activeComment) {\n            currentLine = this.activeComment.lineNumber;\n        } else {\n            currentLine = this.editor.getPosition().lineNumber;\n        }\n\n        const comments = Object.values(this.commentState).map(cs => cs.comment).filter((c) => {\n            if (!c.parentId) {\n                if (direction === NavigationDirection.next) {\n                    return c.lineNumber > currentLine;\n                } else if (direction === NavigationDirection.prev) {\n                    return c.lineNumber < currentLine;\n                }\n            }\n        });\n\n        if (comments.length) {\n            comments.sort((a, b) => {\n                if (direction === NavigationDirection.next) {\n                    return a.lineNumber - b.lineNumber;\n                } else if (direction === NavigationDirection.prev) {\n                    return b.lineNumber - a.lineNumber;\n                }\n            });\n\n            const comment = comments[0];\n            this.setActiveComment(comment)\n            this.refreshComments();\n            this.layoutInlineToolbar();\n            this.editor.revealLineInCenter(comment.lineNumber);\n        }\n    }\n}\n\n\n"],"sourceRoot":""}